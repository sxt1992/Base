
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>个人主页</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <style type="text/css">
    body{margin:0;padding:0;}
      .taoSlideD,.taoSlideD1,.taoSlideD2,.taoSlideU,.taoSlideU1,.taoSlideU2{display:none;}
      .taoSlideD1{background:blue;}
      .taoSlideD2{background:red;}
    </style>
</head>
<body>
<div id="content"> 
    <div class="myContent"> 
        <ul> 
            <li>item1 -- item1 -- item1</li> 
            <li>item2 -- item2 -- item2</li> 
            <li>item3 -- item3 -- item3</li> 
            <li>item4 -- item4 -- item4</li> 
            <li>item5 -- item5 -- item5</li> 
            <li>item6 -- item6 -- item6</li> 
            <li>item7 -- item7 -- item7</li> 
        </ul> 
    </div>
</div>
<script type="text/javascript">
var rAF = window.requestAnimationFrame	||
	window.webkitRequestAnimationFrame	||
	window.mozRequestAnimationFrame		||
	window.oRequestAnimationFrame		||
	window.msRequestAnimationFrame		||
	function (callback) { window.setTimeout(callback, 1000 / 60); };
	
var taoUD=function(elem,udType){
	var sLoc=0,eLoc=0,tDown=null,tUp=null,isFirst=true,flushing=false;
	var taoUDStep1=function(){
		//拖拉过程
		if(isFirst){
			isFirst=false;
			tDown=$("<div class='taoSlideD'><div class='taoSlideD1'><p>松开刷新</p></div><div class='taoSlideD2'><p>正在刷新...</p></div></div>");
			tUp=$("<div class='taoSlideU'><div class='taoSlideU1'><p>松开加载</p></div><div class='taoSlideU2'><p>正在加载...</p></div></div>");

			$("#content").children().eq(0).before(tDown);
			$("#content").append(tUp);
		}
		if(sLoc>eLoc){
			//上滑
		}
		if(sLoc<eLoc){
			//下滑
			tDown.children(".taoSlideD1")[0].style.paddingTop=eLoc-sLoc+"px";
			tDown.show();
			tDown.children(".taoSlideD1").show();
		}
	};
	var taoUDStep2=function(){
		flushing=true;
		//松开刷新
		if(sLoc>eLoc){
			//上滑
		}
		if(sLoc<eLoc){
			//下滑
			tDown.children().hide();
			tDown.children(".taoSlideD2").show();
			setTimeout(taoUDStep3,8000);
		}
	};
	var taoUDStep3=function(){
		//完成回归
		isFirst=true;
		if(tUp!=null){
			tUp.remove();
			tUp=null;
		}
		if(tDown!=null){
			tDown.remove();
			tDown=null;
		}
		flushing=false;
	};
	/*$(elem).on("touchstart",function(event){
		var touch=event.targetTouches[0];
		sLoc=touch.pageY;
	});
	$(elem).on("touchmove",function(event){
		var touch=event.targetTouches[0];
		eLoc=touch.pageY;
		taoUDStep1(sLoc,eLoc);
	});
	$(elem).on("touchend",function(event){
		taoUDStep2(sLoc,eLoc);
	});*/
	elem[0].addEventListener("touchstart",function(event){
		if(flushing){return;}
		var touch=event.targetTouches[0];
		sLoc=touch.pageY;
	},false); 
    elem[0].addEventListener("touchmove",function(event){
    	if(flushing){return;}
		var touch=event.targetTouches[0];
		eLoc=touch.pageY;
		taoUDStep1();
	},false); 
    elem[0].addEventListener("touchend",function(event){
    	if(flushing){return;}
		taoUDStep2();
	},false);
};
taoUD($("#content"),["u","d"]);

</script>
</body>
</html>